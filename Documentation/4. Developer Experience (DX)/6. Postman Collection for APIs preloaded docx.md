
A comprehensive, production-ready Postman collection with automated testing, environment management, and complete authentication workflows for the LaraBaseX API.

## 📁 Files Structure

```
postman/
├── LaraBaseX-API-Collection.json          # Main collection with all endpoints
├── LaraBaseX-Local-Environment.json       # Local development environment
├── LaraBaseX-Production-Environment.json  # Production environment template
├── README.md                               # Complete documentation
├── setup.sh                               # Quick setup script
└── test.sh                                 # Automated testing script
```

## 🚀 Quick Start

### **Import Collection**
1. Open Postman
2. Import `postman/LaraBaseX-API-Collection.json`
3. Import `postman/LaraBaseX-Local-Environment.json`
4. Set environment as active (top-right dropdown)

### **Run Authentication Flow**
```bash
1. Run: "🔐 Authentication" → "Login with Mobile"
2. Check server logs for OTP (or use default: 1234)
3. Run: "🔐 Authentication" → "Verify OTP"
4. ✅ Access token automatically saved!
5. Test: "👤 User Management" → "Get User Profile"
```

## 🔧 Features Included

### **🤖 Automated Token Management**
- ✅ Auto-saves access token after OTP verification
- ✅ Auto-includes Bearer token in authenticated requests
- ✅ Auto-clears token on logout
- ✅ Smart environment variable management

### **📱 Complete API Coverage**

#### **Authentication Endpoints**
- `GET /api/app-version` - Get app version and store URL
- `POST /api/register` - Register new user and send OTP
- `POST /api/login` - Login with mobile number and send OTP
- `POST /api/verify-otp` - Verify OTP and get access token
- `POST /api/resend-otp` - Resend OTP to mobile number
- `POST /api/logout` - Logout and revoke access token

#### **User Management Endpoints**
- `POST /api/user` - Get authenticated user details
- `POST /api/user/update` - Update user profile information
- `POST /api/user/update-photo` - Upload/update profile photo

#### **Content Endpoints**
- `POST /api/sliders` - Get home page sliders

### **🧪 Testing & Validation**

#### **Automated Test Scripts**
```javascript
// Auto-save access token
if (pm.response.json().access_token) {
    pm.environment.set("access_token", pm.response.json().access_token);
    console.log("✅ Token saved automatically!");
}

// Status code validation
pm.test("Status code is 200", function () {
    pm.response.to.have.status(200);
});

// Response structure validation
pm.test("Response has access_token", function () {
    var jsonData = pm.response.json();
    pm.expect(jsonData).to.have.property('access_token');
});
```

#### **Error Handling Examples**
- **400 Validation Error**: Invalid mobile number format
- **401 Unauthorized**: Invalid or expired access token
- **Response Time Monitoring**: < 5 seconds validation

### **🌍 Environment Management**

#### **Local Development Environment**
```json
{
    "base_url": "http://localhost:8001",
    "access_token": "",
    "mobile_number": "9876543210",
    "device_id": "test-device-postman-local",
    "test_user_email": "john.doe@example.com",
    "test_user_password": "Password123!"
}
```

#### **Production Environment Template**
```json
{
    "base_url": "https://your-production-domain.com",
    "access_token": "",
    "mobile_number": "your-mobile-number",
    "device_id": "production-device-id",
    "test_user_email": "test@yourdomain.com",
    "test_user_password": ""
}
```

## 🛠️ Advanced Usage

### **Newman CLI Testing**
```bash
# Install Newman CLI
npm install -g newman

# Run collection via CLI
newman run postman/LaraBaseX-API-Collection.json \
    -e postman/LaraBaseX-Local-Environment.json \
    --reporters cli,html \
    --reporter-html-export newman-report.html
```

### **Automated Testing Script**
```bash
# Make script executable
chmod +x postman/test.sh

# Run automated tests
./postman/test.sh

# Choose environment (Local/Production)
# Get detailed HTML and JSON reports
```

### **CI/CD Integration**
```yaml
# GitHub Actions example
- name: Run API Tests
    run: |
    npm install -g newman
    newman run postman/LaraBaseX-API-Collection.json \
        -e postman/LaraBaseX-Local-Environment.json \
        --reporters junit \
        --reporter-junit-export api-test-results.xml
```

## 📱 Mobile App Integration

### **Complete Authentication Flow**
```bash
1. GET /api/app-version                    # Check compatibility
2. POST /api/login + mobile + device_id    # Send OTP
3. POST /api/verify-otp + mobile + otp     # Get access token
4. Use Bearer token for authenticated APIs
```

### **Sample Request Headers**
```javascript
{
    "Content-Type": "application/json",
    "Accept": "application/json",
    "Authorization": "Bearer {{access_token}}"
}
```

### **File Upload Example**
```bash
POST /api/user/update-photo
Content-Type: multipart/form-data
Authorization: Bearer {{access_token}}
Body: photo: [select file] # JPG/PNG, max 2MB
```

## 🎯 Benefits

### **For Developers**
- ✅ **Ready-to-Use**: Import and start testing immediately
- ✅ **Automated Workflows**: Token management and authentication
- ✅ **Complete Coverage**: All endpoints with sample data
- ✅ **Error Examples**: Validation and authorization scenarios

### **For Mobile App Developers**
- ✅ **Authentication Reference**: Complete OTP-based login flow
- ✅ **Request Examples**: Sample payloads for all endpoints
- ✅ **File Upload Guide**: Profile photo upload examples
- ✅ **Error Handling**: API error response examples

### **For QA Teams**
- ✅ **Automated Testing**: Newman CLI and CI/CD integration
- ✅ **Performance Monitoring**: Response time validation
- ✅ **Regression Testing**: Consistent test scenarios
- ✅ **Detailed Reports**: HTML and JSON test reports

### **For DevOps Teams**
- ✅ **CI/CD Ready**: Newman CLI automation scripts
- ✅ **Multi-Environment**: Local, staging, production configs
- ✅ **Health Monitoring**: API availability and performance
- ✅ **Deployment Validation**: Automated post-deployment tests

## 📚 Usage Examples

### **Quick Setup**
```bash
# Run setup script for guidance
./postman/setup.sh

# Or manual setup:
# 1. Import Collection: postman/LaraBaseX-API-Collection.json
# 2. Import Environment: postman/LaraBaseX-Local-Environment.json
# 3. Set environment as active
# 4. Run authentication flow
```

### **Testing Authentication**
```bash
# Step 1: Login (sends OTP)
POST {{base_url}}/api/login
{
    "mobile": "{{mobile_number}}",
    "device_id": "{{device_id}}"
}

# Step 2: Verify OTP (gets token)
POST {{base_url}}/api/verify-otp
{
    "mobile": "{{mobile_number}}",
    "otp": "1234"
}
# ✅ Token auto-saved to environment!

# Step 3: Test authenticated request
POST {{base_url}}/api/user
Headers: Authorization: Bearer {{access_token}}
```

### **Automated Testing**
```bash
# Run all tests with detailed reporting
newman run postman/LaraBaseX-API-Collection.json \
    -e postman/LaraBaseX-Local-Environment.json \
    --reporters cli,html,json \
    --reporter-html-export reports/api-test-report.html \
    --reporter-json-export reports/api-test-results.json
```

## 🔍 Troubleshooting

### **Common Issues**

#### **"access_token not set"**
```bash
Solution:
1. Run "Login with Mobile" request
2. Check server logs for OTP: storage/logs/laravel.log
3. Run "Verify OTP" with correct OTP
4. Token will be auto-saved to environment
```

#### **"mobile_number not set"**
```bash
Solution:
1. Check environment is selected (top-right dropdown)
2. Verify mobile_number exists in environment variables
3. Set manually if needed: mobile_number = "9876543210"
```

#### **"401 Unauthorized"**
```bash
Solution:
1. Check access_token is set in environment
2. Re-run authentication flow if token expired
3. Verify Authorization header format: "Bearer {{access_token}}"
```

## 📊 Testing Reports

### **HTML Report Features**
- ✅ Test execution summary
- ✅ Request/response details
- ✅ Performance metrics
- ✅ Error analysis and debugging info

### **JSON Report Features**
- ✅ Machine-readable test results
- ✅ CI/CD integration data
- ✅ Performance metrics
- ✅ Detailed execution logs

---

**✅ Status**: Postman Collection - COMPLETED!
**📦 Ready**: Import, test, and integrate immediately
**🤖 Automated**: Token management and testing workflows
**📱 Mobile-Ready**: Complete authentication and API testing suite
